---
title: "importData"
author: "Karen Santamaria"
date: "9/23/2019"
output: html_document
---

```{r setup}
library(tidyverse)
library(devtools)
library(papaja)
library(psysds364data)
```

```{r}
data("Goldberg")
data("Goldberg_rutendo")
<<<<<<< HEAD
```

=======
>>>>>>> 48c5a5c9547b970eee98ba496190c0f2be6b62de

Goldberg_yifan <- Goldberg_rutendo %>%
 select(FamID, sexor, group, contains("Member"), contains("love"), contains("cnflct"), contains("ambiv"), contains("maint"), contains("seq"), contains("attach"), contains("feel"))
```


code modified from Yifan 
```{r}
sub_G <- Goldberg_yifan[c(1:5, 6:656)]

sub_G$FeelMC_A <- NULL
sub_G$FeelMC_P <- NULL

Goldberg_ppp <- 
  unite(sub_G, "F_S_G_A_P", 1:5, sep = "_") %>%
  gather("key","value", 2:650) %>%
  separate(key, into = c("wave","scale"), sep = 3) %>%
  spread("scale", "value") %>%
  separate(F_S_G_A_P, into = c( "FamID", "sexor","group","Member_A","Member_P"), sep = "_") 

```

```{r}
Goldberg_rutendo %>%
  select(contains('gender')) %>%
  names()


Goldberg_rutendo$race <- as_factor(Goldberg_rutendo$w11Race_A)
Goldberg_rutendo$group <- as_factor(Goldberg_rutendo$group)
Goldberg_rutendo$sexor <- as_factor(Goldberg_rutendo$sexor)
Goldberg_rutendo$education <- as_factor(Goldberg_rutendo$w11Educ_A)
Goldberg_rutendo$adop_type_cpl <- as_factor(Goldberg_rutendo$w11Couple_A)
Goldberg_rutendo$family_income <- as_factor(Goldberg_rutendo$w11FamInc_A)
Goldberg_rutendo$personal_income <- as_factor(Goldberg_rutendo$w11PersInc_A)
Goldberg_rutendo$why_adopt <- as_factor(Goldberg_rutendo$w11WhyAdopt_A)
Goldberg_rutendo$gender <- as_factor(Goldberg_rutendo$gender_A)


Goldberg_rutendo$race <- fct_explicit_na(Goldberg_rutendo$race, na_level = "(Missing)")

Goldberg_rutendo %>%
  group_by(race) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(sexor) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(group) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(education) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(adop_type_cpl) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(why_adopt) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))

Goldberg_rutendo %>%
  group_by(gender) %>%
  tally  %>%
  mutate(pct=100* (n/sum(n)))
```

